{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts","../../../../internal/guards/dist/cjs/index.js"],"names":[],"mappings":"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","sourcesContent":["/*!\r\n   Copyright 2019 Ron Buckton\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n\r\n   THIRD PARTY LICENSE NOTICE:\r\n\r\n   CancelToken is derived from the implementation of CancellationToken in\r\n   Promise Extensions for Javascript: https://github.com/rbuckton/prex\r\n\r\n   Promise Extensions is licensed under the Apache 2.0 License:\r\n\r\n   Promise Extensions for JavaScript\r\n   Copyright (c) Microsoft Corporation\r\n\r\n   Licensed under the Apache License, Version 2.0 (the \"License\");\r\n   you may not use this file except in compliance with the License.\r\n   You may obtain a copy of the License at\r\n\r\n       http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n   Unless required by applicable law or agreed to in writing, software\r\n   distributed under the License is distributed on an \"AS IS\" BASIS,\r\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n   See the License for the specific language governing permissions and\r\n   limitations under the License.\r\n*/\r\n\r\nimport { Cancelable, CancelableSource, CancelError, CancelSignal, CancelSubscription } from \"@esfx/cancelable\";\r\nimport { Disposable } from \"@esfx/disposable\";\r\nimport /*#__INLINE__*/ { isFunction, isIterableObject, isMissing, isPositiveFiniteNumber } from \"@esfx/internal-guards\";\r\nimport /*#__INLINE__*/ { LinkedList, LinkedListNode, listAdd, listCreate, listRemove } from \"@esfx/internal-linked-list\";\r\n\r\nexport { CancelError, CancelSubscription } from \"@esfx/cancelable\";\r\n\r\n// #region DOM AbortController/AbortSignal compatibility\r\n\r\ntype DOMAbortSignal = (typeof globalThis) extends { AbortSignal: Function & { prototype: infer TAbortSignal } } ? TAbortSignal : never;\r\n\r\ninterface AbortController {\r\n    readonly signal: AbortSignal;\r\n    abort(reason?: unknown): void\r\n}\r\n\r\ndeclare var AbortController: { new(): AbortController; prototype: AbortController };\r\n\r\ninterface AbortSignal {\r\n    readonly aborted: boolean;\r\n    readonly reason?: unknown;\r\n    addEventListener(event: string, listener: () => void): void;\r\n    removeEventListener(event: string, listener: () => void): void;\r\n    dispatchEvent(event: unknown): void;\r\n}\r\n\r\ndeclare var AbortSignal: { new(): AbortSignal; prototype: AbortSignal, timeout?(delay: number): AbortSignal; };\r\n\r\nlet AbortControllerAbort: ((obj: AbortController, reason?: unknown) => void) | undefined;\r\nlet AbortControllerGetSignal: ((obj: AbortController) => AbortSignal) | undefined;\r\nlet AbortSignalAddEventListener: ((obj: AbortSignal, event: string, listener: () => void) => void) | undefined;\r\nlet AbortSignalRemoveEventListener: ((obj: AbortSignal, event: string, listener: () => void) => void) | undefined;\r\nlet AbortSignalGetAborted: ((obj: AbortSignal) => boolean) | undefined;\r\nlet AbortSignalGetReason: ((obj: AbortSignal) => unknown) | undefined;\r\n\r\nconst kEventTarget = Symbol.for(\"nodejs.event_target\");\r\nconst isNodeAbortSignal = typeof AbortSignal === \"function\" && (AbortSignal as any)[kEventTarget] === true;\r\nconst nodeEventTargetProperties = new Set(isNodeAbortSignal ? [\"dispatchEvent\", ...Object.getOwnPropertySymbols(EventTarget.prototype)] : []);\r\n\r\nif (typeof AbortController === \"function\" && typeof AbortSignal === \"function\") {\r\n    const uncurryThis = Function.prototype.bind.bind(Function.prototype.call) as <T, A extends unknown[], R>(f: (this: T, ...args: A) => R) => (this_: T, ...args: A) => R;\r\n    AbortControllerAbort = uncurryThis(AbortController.prototype.abort);\r\n    AbortControllerGetSignal = uncurryThis(Object.getOwnPropertyDescriptor(AbortController.prototype, \"signal\")!.get!);\r\n    AbortSignalAddEventListener = uncurryThis(AbortSignal.prototype.addEventListener);\r\n    AbortSignalRemoveEventListener = uncurryThis(AbortSignal.prototype.removeEventListener);\r\n    AbortSignalGetAborted = uncurryThis(Object.getOwnPropertyDescriptor(AbortSignal.prototype, \"aborted\")!.get!);\r\n    AbortSignalGetReason = \"reason\" in AbortSignal.prototype ? uncurryThis(Object.getOwnPropertyDescriptor(AbortSignal.prototype, \"reason\")!.get!) : undefined;\r\n}\r\n\r\n// #endregion DOM AbortController/AbortSignal compatibility\r\n\r\nconst emptySubscription = Cancelable.none.subscribe(() => {});\r\nconst defaultReason = Cancelable.canceled.reason;\r\n\r\ninterface CancelLinks {\r\n    getLinkedState(): \"unsignaled\" | \"signaled\" | \"closed\";\r\n    unlink(): void;\r\n}\r\n\r\nclass CancelState {\r\n    static createCancelToken: (cancelState: CancelState) => CancelToken;\r\n\r\n    static closed: CancelState;\r\n    static canceled: CancelState;\r\n\r\n    static {\r\n        this.closed = new CancelState();\r\n        this.closed.close();\r\n\r\n        this.canceled = new CancelState();\r\n        this.canceled.cancel(new CancelError());\r\n    }\r\n\r\n    private _links: CancelLinks | undefined;\r\n    private _state: \"unsignaled\" | \"signaled\" | \"closed\" = \"unsignaled\";\r\n    private _reason: unknown;\r\n    private _source: CancelSource | undefined;\r\n    private _token: CancelToken | undefined;\r\n    private _subscriptions: LinkedList<() => void> | undefined;\r\n    private _abortController: AbortController | undefined;\r\n    private _pendingCancelAfters: ReturnType<typeof setTimeout>[] = [];\r\n\r\n    constructor(links?: CancelLinks) {\r\n        this._links = links;\r\n    }\r\n\r\n    get state() {\r\n        return this._state === \"unsignaled\" && this._links ? this._links.getLinkedState() : this._state;\r\n    }\r\n\r\n    get source() {\r\n        return this._source ??= new CancelSource(this);\r\n    }\r\n\r\n    get token() {\r\n        return this._token ??= CancelState.createCancelToken(this);\r\n    }\r\n\r\n    get reason() {\r\n        return this._reason;\r\n    }\r\n\r\n    get abortController() {\r\n        if (!this._abortController && typeof AbortController === \"function\") {\r\n            this._abortController = new AbortController();\r\n            if (this._state === \"signaled\") {\r\n                AbortControllerAbort!(this._abortController, this._reason);\r\n            }\r\n        }\r\n        return this._abortController;\r\n    }\r\n\r\n    get abortSignal() {\r\n        const abortController = this.abortController;\r\n        return abortController ? AbortControllerGetSignal!(abortController) : undefined;\r\n    }\r\n\r\n    static race(signals: CancelSignal[]) {\r\n        const subscriptions: CancelSubscription[] = [];\r\n        const cancelState = new CancelState({\r\n            getLinkedState() {\r\n                return signals.some(isSignaled) ? \"signaled\" :\r\n                    signals.some(canBeSignaled) ? \"unsignaled\" :\r\n                    \"closed\";\r\n            },\r\n            unlink() {\r\n                if (subscriptions.length > 0) {\r\n                    for (const subscription of subscriptions.splice(0, subscriptions.length)) {\r\n                        subscription.unsubscribe();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        for (const signal of signals) {\r\n            let signaled = false;\r\n            const onSignaled = () => {\r\n                if (!signaled) {\r\n                    signaled = true;\r\n                    cancelState.cancel(signal.reason ?? defaultReason);\r\n                }\r\n            };\r\n\r\n            if (signal.signaled) {\r\n                onSignaled();\r\n                break;\r\n            }\r\n            else {\r\n                subscriptions.push(signal.subscribe(onSignaled));\r\n            }\r\n        }\r\n\r\n        return cancelState;\r\n    }\r\n\r\n    cancel(reason: unknown) {\r\n        if (this._state !== \"unsignaled\") return;\r\n\r\n        const links = this._links;\r\n        const subscriptions = this._subscriptions;\r\n        const abortController = this._abortController;\r\n        const pendingCancelAfters = this._pendingCancelAfters.splice(0, this._pendingCancelAfters.length);\r\n\r\n        this._state = \"signaled\";\r\n        this._reason = reason;\r\n        this._links = undefined;\r\n        this._subscriptions = undefined;\r\n        this._abortController = undefined;\r\n\r\n        for (const timeout of pendingCancelAfters) {\r\n            clearTimeout(timeout);\r\n        }\r\n\r\n        try {\r\n            links?.unlink();\r\n\r\n            if (subscriptions) {\r\n                const callbacks: (() => void)[] = [];\r\n                while (subscriptions.head) {\r\n                    // The registration for each callback holds onto the node, the node holds onto the\r\n                    // list, and the list holds all other nodes and callbacks. By removing the node from\r\n                    // the list, the GC can collect any otherwise unreachable nodes.\r\n                    const head = subscriptions.head;\r\n                    if (listRemove(subscriptions, head)) {\r\n                        callbacks.push(head.value);\r\n                        head.value = undefined!;\r\n                    }\r\n                }\r\n\r\n                for (const callback of callbacks) {\r\n                    executeCallback(callback);\r\n                }\r\n            }\r\n        }\r\n        finally {\r\n            if (abortController) {\r\n                AbortControllerAbort!(abortController, this._reason);\r\n            }\r\n        }\r\n    }\r\n\r\n    cancelAfter(ms: number, reason: unknown) {\r\n        if (this._state === \"unsignaled\") {\r\n            this._pendingCancelAfters.push(setTimeout(() => this.cancel(reason), ms));\r\n        }\r\n    }\r\n\r\n    close() {\r\n        if (this._state !== \"unsignaled\") return;\r\n\r\n        const currentLinks = this._links;\r\n        const currentSubscriptions = this._subscriptions;\r\n        const pendingCancelAfters = this._pendingCancelAfters.splice(0, this._pendingCancelAfters.length);\r\n\r\n        this._state = \"closed\";\r\n        this._reason = undefined;\r\n        this._links = undefined;\r\n        this._subscriptions = undefined;\r\n        this._abortController = undefined;\r\n\r\n        for (const timeout of pendingCancelAfters) {\r\n            clearTimeout(timeout);\r\n        }\r\n\r\n        currentLinks?.unlink();\r\n        if (currentSubscriptions) {\r\n            while (currentSubscriptions.head) {\r\n                const head = currentSubscriptions.head;\r\n                if (listRemove(currentSubscriptions, head)) {\r\n                    head.value = undefined!;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    subscribe(onSignaled: () => void): CancelSubscription {\r\n        if (this.state !== \"unsignaled\") {\r\n            throw new Error(\"Illegal state\");\r\n        }\r\n\r\n        const list = this._subscriptions ??= listCreate();\r\n        return createCancelSubscription(list, listAdd(list, onSignaled));\r\n    }\r\n}\r\n\r\n/**\r\n * Signals a {@link CancelToken} when cancellation has been requested.\r\n */\r\nexport interface CancelSource extends CancelableSource, Disposable {\r\n    /**\r\n     * Gets the {@link CancelToken} linked to this source.\r\n     */\r\n    readonly token: CancelToken;\r\n\r\n    /**\r\n     * Cancels the source, evaluating any subscribed callbacks. If any callback raises an exception,\r\n     * the exception is propagated to a host specific unhandled exception mechanism.\r\n     */\r\n    cancel(reason?: unknown): void;\r\n\r\n    /**\r\n     * Closes the source, preventing the possibility of future cancellation.\r\n     */\r\n    close(): void;\r\n}\r\n\r\nconst weakCancelSourceState = new WeakMap<CancelSource, CancelState>();\r\n\r\nconst CancelSource = class implements CancelSource {\r\n    static {\r\n        // Hide the constructor from the prototype\r\n        Object.defineProperty(this.prototype, \"constructor\", { ...Object.getOwnPropertyDescriptor(this.prototype, \"constructor\"), value: Object });\r\n        Object.defineProperty(this.prototype, Symbol.toStringTag, { configurable: true, value: \"CancelSource\" });\r\n    }\r\n\r\n    constructor(cancel: CancelState) {\r\n        weakCancelSourceState.set(this, cancel);\r\n        Object.freeze(this);\r\n    }\r\n\r\n    get token() {\r\n        const cancel = weakCancelSourceState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelSource\");\r\n        return cancel.token;\r\n    }\r\n\r\n    cancel(reason?: unknown) {\r\n        const cancel = weakCancelSourceState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelSource\");\r\n        if (cancel.state === \"unsignaled\") {\r\n            cancel.cancel(reason ?? new CancelError());\r\n        }\r\n    }\r\n\r\n    cancelAfter(timeout: number, reason?: unknown) {\r\n        if (!isPositiveFiniteNumber(timeout)) throw new RangeError(\"Argument out of range: timeout\");\r\n\r\n        const cancel = weakCancelSourceState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelSource\");\r\n        if (cancel.state === \"unsignaled\") {\r\n            cancel.cancelAfter(timeout, reason ?? new CancelError(\"Operation timed out\"));\r\n        }\r\n    }\r\n\r\n    close() {\r\n        const cancel = weakCancelSourceState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelSource\");\r\n        cancel.close();\r\n    }\r\n\r\n    [CancelableSource.cancelSignal]() {\r\n        return this.token;\r\n    }\r\n\r\n    [CancelableSource.cancel](reason?: unknown) {\r\n        this.cancel(reason);\r\n    }\r\n\r\n    [Disposable.dispose]() {\r\n        this.close();\r\n    }\r\n};\r\n\r\nconst weakCancelTokenState = new WeakMap<CancelToken, CancelState>();\r\n\r\n/**\r\n * Propagates notifications that operations should be canceled.\r\n */\r\nexport class CancelToken implements Cancelable, CancelSignal {\r\n    static [kEventTarget] = isNodeAbortSignal; // treat this as a NodeJS event target\r\n    static {\r\n        CancelState.createCancelToken = cancelState => {\r\n            // If it is available, make the token an `AbortSignal` instance with a `CancelToken` prototype.\r\n            // This gives the token the same internal state as an `AbortSignal` and allows the token to be\r\n            // used in `fetch` and other DOM apis.\r\n            const abortSignal = cancelState.abortSignal;\r\n            let token: CancelToken;\r\n            if (abortSignal) {\r\n                token = Object.setPrototypeOf(abortSignal, CancelToken.prototype);\r\n            }\r\n            else {\r\n                token = Object.create(CancelToken.prototype);\r\n            }\r\n            weakCancelTokenState.set(token, cancelState);\r\n            Object.preventExtensions(token);\r\n            return token;\r\n        };\r\n\r\n        Object.defineProperty(this.prototype, Symbol.toStringTag, { configurable: true, value: \"CancelToken\" });\r\n    }\r\n\r\n    static readonly none = CancelState.closed.token;\r\n    static readonly canceled = CancelState.canceled.token;\r\n\r\n    private constructor() {\r\n        throw new TypeError(\"Object not creatable.\");\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating whether the token is signaled.\r\n     */\r\n    get signaled() {\r\n        const cancel = weakCancelTokenState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelToken\");\r\n        return cancel.state === \"signaled\";\r\n    }\r\n\r\n    /**\r\n     * Gets the reason for cancellation.\r\n     */\r\n    get reason() {\r\n        const cancel = weakCancelTokenState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelToken\");\r\n        return cancel.reason;\r\n    }\r\n\r\n    /**\r\n     * Gets a value indicating whether the token can be signaled.\r\n     */\r\n    get canBeSignaled() {\r\n        const cancel = weakCancelTokenState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelToken\");\r\n        return cancel.state !== \"closed\";\r\n    }\r\n\r\n    /**\r\n     * Adapts a {@link CancelToken} from a cancelable.\r\n     */\r\n     static from(cancelable: Cancelable | DOMAbortSignal | null | undefined) {\r\n        if (cancelable === Cancelable.none || isMissing(cancelable)) {\r\n            return CancelToken.none;\r\n        }\r\n        if (cancelable === Cancelable.canceled) {\r\n            return CancelToken.canceled;\r\n        }\r\n        if (cancelable instanceof CancelSource) {\r\n            return cancelable.token;\r\n        }\r\n        if (cancelable instanceof CancelToken) {\r\n            return cancelable;\r\n        }\r\n        if (typeof AbortSignal === \"function\" && cancelable instanceof AbortSignal) {\r\n            return getCancelTokenFromAbortSignal(cancelable);\r\n        }\r\n        if (Cancelable.hasInstance(cancelable)) {\r\n            return getCancelTokenFromCancelable(cancelable);\r\n        }\r\n        throw new TypeError(\"Cancelable exepected: cancelable\");\r\n    }\r\n\r\n    /**\r\n     * Creates a new {@link CancelSource}.\r\n     *\r\n     * @param cancelables An optional iterable of {@link @esfx/cancelable!Cancelable} objects. If present,\r\n     * the source becomes linked to the provided cancelables and will be canceled\r\n     * when a linked cancelable is canceled.\r\n     *\r\n     * @remarks Calling {@link source} with `cancelables` is similar to {@link race}, except you can\r\n     * individually cancel or close the resulting source. This can be better for memory or GC purposes,\r\n     * since when the resulting source is canceled or closed it can be unlinked from the cancelables,\r\n     * removing references from each cancelable to the resulting source which could otherwise prevent\r\n     * garbage collection.\r\n     */\r\n    static source(cancelables?: Iterable<Cancelable | DOMAbortSignal | null | undefined>): CancelSource {\r\n        if (isMissing(cancelables)) {\r\n            return new CancelState().source;\r\n        }\r\n\r\n        if (!isIterableObject(cancelables)) {\r\n            throw new TypeError(\"Object not iterable: cancelables\");\r\n        }\r\n\r\n        const signals = getCancelSignalArrayFromCancelables(cancelables);\r\n        if (!signals) {\r\n            throw new TypeError(\"Cancelable element expected: cancelables\");\r\n        }\r\n\r\n        if (!signals.some(canBeSignaled)) {\r\n            return new CancelState().source;\r\n        }\r\n\r\n        return CancelState.race(signals).source;\r\n    }\r\n\r\n    /**\r\n     * Returns a {@link CancelToken} that becomes signaled when any of the provided cancelables are signaled.\r\n     *\r\n     * @param cancelables An iterable of {@link @esfx/cancelable!Cancelable} objects.\r\n     *\r\n     * @remarks This is similar to calling {@link source} with the provided `cancelables`. In general,\r\n     * calling {@link source} is preferred as it provides better resource management.\r\n     */\r\n    static race(cancelables: Iterable<Cancelable | DOMAbortSignal | null | undefined>) {\r\n        if (!isIterableObject(cancelables)) {\r\n            throw new TypeError(\"Object not iterable: cancelables\");\r\n        }\r\n\r\n        const signals = getCancelSignalArrayFromCancelables(cancelables);\r\n        if (!signals) {\r\n            throw new TypeError(\"Cancelable element expected: cancelables\");\r\n        }\r\n\r\n        if (!signals.some(canBeSignaled)) {\r\n            return CancelToken.none;\r\n        }\r\n\r\n        return CancelState.race(signals).token;\r\n    }\r\n\r\n    /**\r\n     * Returns a {@link CancelToken} that becomes signaled when all of the provided cancelables are signaled.\r\n     *\r\n     * @param cancelables An iterable of {@link @esfx/cancelable!Cancelable} objects.\r\n     */\r\n    static all(cancelables: Iterable<Cancelable | DOMAbortSignal | null | undefined>) {\r\n        if (!isIterableObject(cancelables)) {\r\n            throw new TypeError(\"Object not iterable: cancelables\");\r\n        }\r\n\r\n        const signals = getCancelSignalArrayFromCancelables(cancelables);\r\n        if (!signals) {\r\n            throw new TypeError(\"Cancelable element expected: cancelables\");\r\n        }\r\n\r\n        if (!signals.some(canBeSignaled)) {\r\n            return CancelToken.none;\r\n        }\r\n\r\n        const reasons: unknown[] = [];\r\n        const subscriptions: CancelSubscription[] = [];\r\n        const cancelState = new CancelState({\r\n            getLinkedState() {\r\n                return signals.every(isSignaled) ? \"signaled\" :\r\n                    signals.some(canBeSignaled) ? \"unsignaled\" :\r\n                    \"closed\";\r\n            },\r\n            unlink() {\r\n                if (subscriptions.length > 0) {\r\n                    for (const subscription of subscriptions.splice(0, subscriptions.length)) {\r\n                        subscription.unsubscribe();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        let signalsRemaining = signals.length;\r\n        for (let i = 0; i < signals.length; i++) {\r\n            let signaled = false;\r\n            const signal = signals[i];\r\n            const onSignaled = () => {\r\n                if (!signaled) {\r\n                    signaled = true;\r\n                    signalsRemaining--;\r\n                    reasons[i] = signal.reason ?? defaultReason;\r\n                    if (signalsRemaining === 0) {\r\n                        const error = new CancelError();\r\n                        if (!reasons.every(reason => reason === defaultReason)) {\r\n                            Object.defineProperty(error, \"cause\", { enumerable: false, configurable: true, writable: true, value: new AggregateError(reasons) });\r\n                        }\r\n                        cancelState.cancel(error);\r\n                    }\r\n                }\r\n            };\r\n\r\n            if (signal.signaled) {\r\n                onSignaled();\r\n            }\r\n            else {\r\n                subscriptions.push(signal.subscribe(onSignaled));\r\n            }\r\n        }\r\n\r\n        return cancelState.token;\r\n    }\r\n\r\n    /**\r\n     * Gets a {@link CancelToken} that is already canceled with the provided reason.\r\n     */\r\n    static canceledWith(reason: unknown) {\r\n        const cancelState = new CancelState();\r\n        cancelState.cancel(reason ?? new CancelError());\r\n        return cancelState.token;\r\n    }\r\n\r\n    /**\r\n     * Gets a {@link CancelToken} that will be canceled with the provided reason after a timeout has elapsed.\r\n     */\r\n    static timeout(ms: number, reason?: unknown) {\r\n        if (!isPositiveFiniteNumber(ms)) throw new RangeError(\"Argument out of range: ms\");\r\n\r\n        const cancelState = new CancelState();\r\n        cancelState.cancelAfter(ms, reason ?? new CancelError(\"Operation timed out\"));\r\n        return cancelState.token;\r\n    }\r\n\r\n    /**\r\n     * Throws a {@link @esfx/cancelable!CancelError} if the token was signaled.\r\n     */\r\n    throwIfSignaled() {\r\n        const cancel = weakCancelTokenState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelToken\");\r\n        if (cancel.state === \"signaled\") {\r\n            throw cancel.reason;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Subscribes to notifications for when the object becomes signaled.\r\n     */\r\n    subscribe(onSignaled: () => void): CancelSubscription {\r\n        if (!isFunction(onSignaled)) throw new TypeError(\"Function expected: onSignaled\");\r\n\r\n        const cancel = weakCancelTokenState.get(this);\r\n        if (!cancel) throw new TypeError(\"Value of 'this' must be of type CancelToken\");\r\n        if (cancel.state === \"closed\") return emptySubscription;\r\n        if (cancel.state === \"signaled\") return onSignaled(), emptySubscription;\r\n        return cancel.subscribe(onSignaled);\r\n    }\r\n\r\n    // #region Cancelable\r\n    /** {@inheritDoc @esfx/cancelable!Cancelable#[Cancelable.cancelSignal]:member(1)} */\r\n    [Cancelable.cancelSignal](): CancelToken {\r\n        return this;\r\n    }\r\n    // #endregion Cancelable\r\n}\r\n\r\nif (isNodeAbortSignal) {\r\n    Object.setPrototypeOf(CancelToken.prototype, EventTarget.prototype);\r\n}\r\n\r\n// helpers\r\n\r\nconst weakCancelTokenFromCancelSignal = new WeakMap<CancelSignal, CancelToken>();\r\nconst weakCancelTokenFromAbortSignal = typeof AbortSignal === \"function\" ? new WeakMap<AbortSignal, CancelToken>() : undefined;\r\nconst weakCancelSignalFromAbortSignal = typeof AbortSignal === \"function\" ? new WeakMap<AbortSignal, CancelSignal>() : undefined;\r\n\r\nfunction getCancelSignalArrayFromCancelables(cancelables: Iterable<Cancelable | DOMAbortSignal | null | undefined>): CancelSignal[] | undefined {\r\n    const signals: CancelSignal[] = [];\r\n    for (const cancelable of cancelables) {\r\n        const signal: CancelSignal | undefined =\r\n            cancelable === null || cancelable === undefined ? CancelToken.none :\r\n            cancelable instanceof CancelToken ? cancelable :\r\n            typeof AbortSignal === \"function\" && cancelable instanceof AbortSignal ? getCancelSignalFromAbortSignal(cancelable) :\r\n            Cancelable.hasInstance(cancelable) ? cancelable[Cancelable.cancelSignal]() :\r\n            undefined;\r\n\r\n        if (!signal) {\r\n            return undefined;\r\n        }\r\n\r\n        signals.push(signal);\r\n    }\r\n\r\n    return signals;\r\n}\r\n\r\nfunction getCancelTokenFromCancelSignal(cancelSignal: CancelSignal): CancelToken {\r\n    if (cancelSignal instanceof CancelToken) {\r\n        return cancelSignal;\r\n    }\r\n\r\n    let cancelToken = weakCancelTokenFromCancelSignal?.get(cancelSignal);\r\n    if (!cancelToken) {\r\n        let subscription: CancelSubscription | undefined;\r\n\r\n        const cancelState = new CancelState({\r\n            getLinkedState() {\r\n                return isSignaled(cancelSignal) ? \"signaled\" :\r\n                    canBeSignaled(cancelSignal) ? \"unsignaled\" :\r\n                    \"closed\";\r\n            },\r\n            unlink() {\r\n                if (subscription) {\r\n                    subscription.unsubscribe();\r\n                    subscription = undefined;\r\n                }\r\n            }\r\n        });\r\n\r\n        subscription = cancelSignal.subscribe(() => {\r\n            cancelState.cancel(cancelSignal.reason ?? defaultReason);\r\n        });\r\n\r\n        cancelToken = cancelState.token;\r\n        weakCancelTokenFromCancelSignal?.set(cancelSignal, cancelToken);\r\n    }\r\n    return cancelToken;\r\n}\r\n\r\nfunction getCancelTokenFromCancelable(cancelable: Cancelable) {\r\n    if (cancelable instanceof CancelToken) {\r\n        return cancelable;\r\n    }\r\n\r\n    return getCancelTokenFromCancelSignal(cancelable[Cancelable.cancelSignal]());\r\n}\r\n\r\nfunction getCancelSignalFromAbortSignal(abortSignal: AbortSignal): CancelSignal {\r\n    if (abortSignal instanceof CancelToken) {\r\n        return abortSignal;\r\n    }\r\n\r\n    let cancelSignal = weakCancelSignalFromAbortSignal?.get(abortSignal);\r\n    if (!cancelSignal) {\r\n        cancelSignal = {\r\n            get signaled() {\r\n                return AbortSignalGetAborted!(abortSignal);\r\n            },\r\n            get reason() {\r\n                return AbortSignalGetReason?.(abortSignal) ?? defaultReason;\r\n            },\r\n            subscribe(onSignaled) {\r\n                if (!isFunction(onSignaled)) throw new TypeError(\"Function expected: onSignaled\");\r\n\r\n                let subscribed = true;\r\n                const onAbort = () => {\r\n                    if (subscribed) {\r\n                        subscribed = false;\r\n                        AbortSignalRemoveEventListener!(abortSignal, \"abort\", onAbort);\r\n                        onSignaled();\r\n                        onSignaled = undefined!;\r\n                    }\r\n                };\r\n                AbortSignalAddEventListener!(abortSignal, \"abort\", onAbort);\r\n                return CancelSubscription.create(() => {\r\n                    if (subscribed) {\r\n                        subscribed = false;\r\n                        AbortSignalRemoveEventListener!(abortSignal, \"abort\", onAbort);\r\n                        onSignaled = undefined!;\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        weakCancelSignalFromAbortSignal?.set(abortSignal, cancelSignal);\r\n    }\r\n    return cancelSignal;\r\n}\r\n\r\nfunction getCancelTokenFromAbortSignal(abortSignal: AbortSignal): CancelToken {\r\n    if (abortSignal instanceof CancelToken) {\r\n        return abortSignal;\r\n    }\r\n\r\n    let cancelToken = weakCancelTokenFromAbortSignal?.get(abortSignal);\r\n    if (!cancelToken) {\r\n        cancelToken = getCancelTokenFromCancelSignal(getCancelSignalFromAbortSignal(abortSignal));\r\n        weakCancelTokenFromAbortSignal?.set(abortSignal, cancelToken);\r\n    }\r\n\r\n    return cancelToken;\r\n}\r\n\r\nfunction executeCallback(callback: () => void) {\r\n    try {\r\n        callback();\r\n    }\r\n    catch (e) {\r\n        // HostReportError(e);\r\n        setImmediate(() => { throw e; });\r\n    }\r\n}\r\n\r\nfunction isSignaled(signal: CancelSignal) {\r\n    return signal.signaled;\r\n}\r\n\r\nfunction canBeSignaled(signal: CancelSignal) {\r\n    return signal !== Cancelable.none && (!(signal instanceof CancelToken) || signal.canBeSignaled);\r\n}\r\n\r\nfunction createCancelSubscription(list: LinkedList<(reason: unknown) => void>, node: LinkedListNode<(reason: unknown) => void>): CancelSubscription {\r\n    return CancelSubscription.create(() => {\r\n        if (list && node && listRemove(list, node)) {\r\n            node.value = undefined!;\r\n            node = undefined!;\r\n            list = undefined!;\r\n        }\r\n    });\r\n}\r\n","\"use strict\";\n/*\n   Copyright 2019 Ron Buckton\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isPrimitive = exports.isPropertyKey = exports.isString = exports.isBoolean = exports.isPositiveInteger = exports.isInteger = exports.isPositiveNonZeroFiniteNumber = exports.isPositiveFiniteNumber = exports.isNumber = exports.isIterator = exports.isAsyncIterableObject = exports.isAsyncIterable = exports.isIterableObject = exports.isIterable = exports.isPresent = exports.isMissing = exports.isDefined = exports.isUndefined = exports.isInstance = exports.isObject = exports.isFunctionOrUndefined = exports.isFunction = void 0;\n/*@internal*/\nfunction isFunction(value) {\n    return typeof value === \"function\";\n}\nexports.isFunction = isFunction;\n/*@internal*/\nfunction isFunctionOrUndefined(value) {\n    return typeof value === \"function\" || value === undefined;\n}\nexports.isFunctionOrUndefined = isFunctionOrUndefined;\n/*@internal*/\nfunction isObject(value) {\n    return typeof value === \"object\" && value !== null\n        || typeof value === \"function\";\n}\nexports.isObject = isObject;\n/*@internal*/\nfunction isInstance(value, ctor) {\n    return !isMissing(value) && value instanceof ctor;\n}\nexports.isInstance = isInstance;\n/*@internal*/\nfunction isUndefined(value) {\n    return value === undefined;\n}\nexports.isUndefined = isUndefined;\n/*@internal*/\nfunction isDefined(value) {\n    return value === undefined;\n}\nexports.isDefined = isDefined;\n/*@internal*/\nfunction isMissing(value) {\n    return value === null\n        || value === undefined;\n}\nexports.isMissing = isMissing;\n/*@internal*/\nfunction isPresent(value) {\n    return value !== null\n        && value !== undefined;\n}\nexports.isPresent = isPresent;\n/*@internal*/\nfunction isIterable(value) {\n    return value !== undefined\n        && value !== null\n        && Symbol.iterator in Object(value);\n}\nexports.isIterable = isIterable;\n/*@internal*/\nfunction isIterableObject(value) {\n    return isObject(value) && Symbol.iterator in value;\n}\nexports.isIterableObject = isIterableObject;\n/*@internal*/\nfunction isAsyncIterable(value) {\n    return value !== undefined\n        && value !== null\n        && Symbol.asyncIterator in Object(value);\n}\nexports.isAsyncIterable = isAsyncIterable;\n/*@internal*/\nfunction isAsyncIterableObject(value) {\n    return isObject(value) && Symbol.asyncIterator in value;\n}\nexports.isAsyncIterableObject = isAsyncIterableObject;\n/** @internal */\nfunction isIterator(value) {\n    return isObject(value)\n        && isFunction(value.next)\n        && isFunctionOrUndefined(value.throw)\n        && isFunctionOrUndefined(value.return)\n        && isFunctionOrUndefined(value[Symbol.iterator]);\n}\nexports.isIterator = isIterator;\n;\n;\n;\n;\n/*@internal*/\nfunction isNumber(value) {\n    return typeof value === \"number\";\n}\nexports.isNumber = isNumber;\n/*@internal*/\nfunction isPositiveFiniteNumber(value) {\n    return isFinite(value) && value >= 0;\n}\nexports.isPositiveFiniteNumber = isPositiveFiniteNumber;\n/*@internal*/\nfunction isPositiveNonZeroFiniteNumber(value) {\n    return isFinite(value) && value > 0;\n}\nexports.isPositiveNonZeroFiniteNumber = isPositiveNonZeroFiniteNumber;\n/*@internal*/\nfunction isInteger(value) {\n    return Object.is(value, value | 0);\n}\nexports.isInteger = isInteger;\n/*@internal*/\nfunction isPositiveInteger(value) {\n    return isInteger(value) && value >= 0;\n}\nexports.isPositiveInteger = isPositiveInteger;\n/*@internal*/\nfunction isBoolean(value) {\n    return typeof value === \"boolean\";\n}\nexports.isBoolean = isBoolean;\n/*@internal*/\nfunction isString(value) {\n    return typeof value === \"string\";\n}\nexports.isString = isString;\n/*@internal*/\nfunction isPropertyKey(value) {\n    return typeof value === \"string\"\n        || typeof value === \"symbol\"\n        || typeof value === \"number\";\n}\nexports.isPropertyKey = isPropertyKey;\n/*@internal*/\nfunction isPrimitive(value) {\n    return typeof value !== \"function\"\n        && (typeof value !== \"object\" || value === null);\n}\nexports.isPrimitive = isPrimitive;\n//# sourceMappingURL=index.js.map"]}